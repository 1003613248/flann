/*
Project: test
*/

import std.c.stdio;
import util;


int findNearest(float[][] vecs, int index, int len) 
{
	int nn = 0;
	
	if (index==0) {
		nn = 1;
	} else {
		nn = 0;
	}

	float dist = DistSquared(&vecs[0][0], &vecs[index][0], len);
	
	for (int i=0;i<vecs.length;++i) {
		if (i!=index) {
			float tmp = DistSquared(&vecs[i][0], &vecs[index][0], len);
			if (tmp<dist) {
				dist = tmp;
				nn = i;
			}
		}
	}
	
	return nn;
}


int main()
{
	FILE *f;
	
	f = fopen("clusterData.dat","r");
	
	int size, flen;
	
	fscanf(f,"%d %d ", &size, &flen);
	
	float[][] vecs = new float[][size];
	
	for (int i=0;i<size;++i) {
		vecs[i] = new float[flen];
		fscanf(f,"%f %f ", &vecs[i][0],&vecs[i][1]);
	}
	fclose(f);
	
	FILE*	fout = fopen("points.dat","w");
	
	fprintf(fout,"NN %d %d 1\n", size, flen);
	
	for (int i=0;i<size;++i) {
		int nearest = findNearest(vecs,i, flen);
		fprintf(fout,"%d %d 1 %f %f\n", i, nearest, vecs[i][0], vecs[i][1]);
	}
	
	fclose(fout);
	
	return 0;
}