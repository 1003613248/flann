
INCLUDE_DIRECTORIES(algorithms util nn .)

ADD_SUBDIRECTORY( tests )

SET(SOURCES flann.cpp util/Random.cpp)

ADD_LIBRARY(flann SHARED ${SOURCES})
ADD_LIBRARY(flann-static STATIC ${SOURCES})
SET_TARGET_PROPERTIES(flann-static PROPERTIES OUTPUT_NAME "flann")
SET_TARGET_PROPERTIES(flann PROPERTIES CLEAN_DIRECT_OUTPUT 1)
SET_TARGET_PROPERTIES(flann-static PROPERTIES CLEAN_DIRECT_OUTPUT 1)

INSTALL (
    TARGETS flann flann-static
    RUNTIME DESTINATION bin
    LIBRARY DESTINATION lib
    ARCHIVE DESTINATION lib
)

INSTALL (
    TARGETS flann flann-static
    ARCHIVE DESTINATION ${PROJECT_SOURCE_DIR}/python
    LIBRARY DESTINATION ${PROJECT_SOURCE_DIR}/python
)

INSTALL (
    FILES flann.h
    DESTINATION include
)